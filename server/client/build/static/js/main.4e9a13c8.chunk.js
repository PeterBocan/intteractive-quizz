(this["webpackJsonpinteractive-quizz"]=this["webpackJsonpinteractive-quizz"]||[]).push([[0],{23:function(e,t,n){e.exports=n(39)},28:function(e,t,n){},29:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(9),c=(n(28),n(2)),i=n(3),l=n(6),o=n(4),u=n(1),d=n(7),m=(n(29),n(5));function p(e){return{type:"ADD_ANSWER",answer:e}}function w(e){return{type:"REMOVE_ANSWER",answer:e}}function h(e){return{type:"ADD_ALL_ANSWERS",answers:e}}function f(e){return{type:"EDIT_QUESTION",question:e}}function E(e){return{type:"ACTION_EDIT",edit:e}}function b(){return function(e){fetch("".concat("https://pbocan.net","/question"),{method:"GET",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){return e({type:"FETCH_DATA",data:t.json()})})).catch((function(e){return console.log(e)}))}}function v(e){return function(t){return function(e){return fetch("".concat("https://pbocan.net","/question?token=saveSomething"),{method:"POST",cache:"no-cache",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(e)})}(e).then((function(e){return t({type:"POST_DATA"})})).catch((function(e){return console.error(e)}))}}var A=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={selected:!1},n.changeState=n.changeState.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"changeState",value:function(){var e=!this.state.selected;this.setState({selected:e}),this.props.onStateChanged&&this.props.onStateChanged(e)}},{key:"isSelected",value:function(){return this.state.selected}},{key:"render",value:function(){return a.a.createElement("button",{onClick:this.changeState,className:this.isSelected()?"button is-large is-primary answer-button":"button is-large answer-button"},this.props.label)}}]),t}(a.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).selectAnswer=n.selectAnswer.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"selectAnswer",value:function(e,t){this.props.selectAnswer(e.key,t)}},{key:"renderAnswers",value:function(){var e=this;return this.props.allAnswers.map((function(t){return a.a.createElement("div",{key:t.key,className:"column is-one-quarter"},a.a.createElement(A,{label:t.text,onStateChanged:function(n){return e.selectAnswer(t,n)}}))}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"columns is-multiline"},this.renderAnswers())}}]),t}(a.a.Component);var g=Object(m.b)((function(e){return{allAnswers:e.allAnswers}}),(function(e){return{selectAnswer:function(t,n){return e(function(e,t){return{type:"SELECT_ANSWER",answer:e,select:t}}(t,n))}}}))(O),N=n(22),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={isAnswer:!1,answer:{}},n.editAnswer=n.editAnswer.bind(Object(u.a)(n)),n.deleteAnswer=n.deleteAnswer.bind(Object(u.a)(n)),n.markAsAnswer=n.markAsAnswer.bind(Object(u.a)(n)),n.state.isAnswer=n.props.answer.isAnswer,n.state.answer=n.props.answer,n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"editAnswer",value:function(e){var t=Object.assign({},this.props.answer);t.text=e.target.value,this.props.editAnswer(t),this.setState({answer:t})}},{key:"deleteAnswer",value:function(){this.props.deleteAnswer(this.props.answer)}},{key:"markAsAnswer",value:function(){var e=Object(N.a)({},this.state.answer);e.isAnswer=!e.isAnswer,console.log(e),this.props.editAnswer(e),this.setState({isAnswer:!0})}},{key:"render",value:function(){var e=this.props.answer;return s.createElement("div",{className:"column"},s.createElement("div",{className:"field has-addons"},s.createElement("div",{className:"control answer-input"},s.createElement("input",{type:"text",defaultValue:""+e.text,className:"input"+(this.state.isAnswer?" is-success":""),onKeyUp:this.editAnswer})),s.createElement("div",{className:"control"},s.createElement("button",{className:"button"+(this.state.isAnswer?" is-success":""),onClick:this.markAsAnswer},s.createElement("span",{className:"icon is-large"},s.createElement("i",{className:"fas fa-check"+(this.state.isAnswer?" is-success":"")})))),s.createElement("div",{className:"control"},s.createElement("button",{className:"button",onClick:this.deleteAnswer},s.createElement("span",{className:"icon is-large"},s.createElement("i",{className:"fas fa-minus"}))))))}}]),t}(s.Component);var k=Object(m.b)((function(e){return{allAnswers:e.allAnswers,selectedAnswers:e.selectedAnswers}}),(function(e){return{editAnswer:function(t){e(function(e){return{type:"EDIT_ANSWER",answer:e}}(t))},deleteAnswer:function(t){e(w(t))}}}))(y),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).renderQuestionAnswers=n.renderQuestionAnswers.bind(Object(u.a)(n)),n.toggleEdit=n.toggleEdit.bind(Object(u.a)(n)),n.addAnswer=n.addAnswer.bind(Object(u.a)(n)),n.captureQuestion=n.captureQuestion.bind(Object(u.a)(n)),n.handleSave=n.handleSave.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"toggleEdit",value:function(){this.props.toggleEdit(!this.props.editMode)}},{key:"renderQuestionAnswers",value:function(){return this.props.allAnswers.map((function(e){return a.a.createElement(k,{answer:e,key:e.key})}))}},{key:"addAnswer",value:function(){var e=(1e64*Math.random()).toString(30);this.props.onAddAnswer({id:this.props.allAnswers.length,text:"",isAnswer:!1,key:e})}},{key:"captureQuestion",value:function(e){this.props.onEditQuestion(e.target.value)}},{key:"handleSave",value:function(){this.props.saveQuestion(this.props.state)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"}," "),a.a.createElement("div",{className:"column"},a.a.createElement("button",{className:"button is-link",onClick:this.toggleEdit},a.a.createElement("i",{className:"icon fas fa-times"}," ")))),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("div",{className:"field"},a.a.createElement("label",{className:"label"},"Otazka"),a.a.createElement("div",{className:"control"},a.a.createElement("input",{className:"input",type:"text",placeholder:"Otazka",defaultValue:this.props.question,onKeyPress:this.captureQuestion})))),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("p",null,"Odpovede")),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("div",{className:"columns is-multiline"},this.renderQuestionAnswers())),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("button",{onClick:this.addAnswer},a.a.createElement("span",{className:"icon is-large"},a.a.createElement("i",{className:"fas fa-2x fa-plus"})))),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column is-two-thirds"}," "),a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column"},a.a.createElement("button",{className:"button is-active is-primary is-large",onClick:function(){return e.handleSave()}},"Save"))))}}]),t}(a.a.Component);var S=Object(m.b)((function(e){return{editMode:e.editMode,allAnswers:e.allAnswers,selectedAnswers:e.selectedAnswers,question:e.question,numberOfCorrectAnswers:e.numberOfCorrectAnswers,state:e}}),(function(e){return{onEditStoreAnswers:function(t){e(h(t))},onAddAnswer:function(t){e(p(t))},onDeleteAnswer:function(t){e(w(t))},onEditQuestion:function(t){e(f(t))},toggleEdit:function(t){e(E(t))},saveQuestion:function(t){e(v(t))}}}))(j),C=n(13),M=n.n(C),T=n(17);function _(){return(_=Object(T.a)(M.a.mark((function e(t){var n,s,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new TextEncoder).encode(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return s=e.sent,a=Array.from(new Uint8Array(s)),e.abrupt("return",a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={unlock:!1},n.state.unlock=n.props.unlockedSite,n.updateMagic=n.updateMagic.bind(Object(u.a)(n)),n.setState=n.setState.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"updateMagic",value:function(e){var t=this;(function(e){return _.apply(this,arguments)})(e.target.value).then((function(e){"9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08"===e&&(t.props.unlockSite(),t.setState({unlock:!0}))}))}},{key:"render",value:function(){return this.state.unlock?(this.props.onUnlock(),a.a.createElement("div",null,this.props.children)):a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("p",null,"Please enter a password"),a.a.createElement("br",null),a.a.createElement("div",{className:"field has-addons"},a.a.createElement("div",{className:"control answer-input"},a.a.createElement("input",{className:"input",type:"text",onKeyUp:this.updateMagic})))),a.a.createElement("div",{className:"column"}," ")))}}]),t}(a.a.Component);var D=Object(m.b)((function(e){return{unlockedSite:e.unlockSite}}),(function(e){return{unlockSite:function(){return e({type:"UNLOCK_SITE"})}}}))(Q),x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={displayMessage:!1,pass:!1},n.deleteAnswer=n.deleteAnswer.bind(Object(u.a)(n)),n.evaluateAnswer=n.evaluateAnswer.bind(Object(u.a)(n)),n.displayMessage=n.displayMessage.bind(Object(u.a)(n)),n.hideMessage=n.hideMessage.bind(Object(u.a)(n)),n.toggleEdit=n.toggleEdit.bind(Object(u.a)(n)),n.fetchQuestionaire=n.fetchQuestionaire.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"toggleEdit",value:function(){this.props.toggleEdit(!this.props.editMode)}},{key:"displayEditor",value:function(){return a.a.createElement(S,null)}},{key:"deleteAnswer",value:function(e){this.props.onDeleteAnswer(e)}},{key:"hideMessage",value:function(){this.setState({displayMessage:!1})}},{key:"evaluateAnswer",value:function(){var e=this;if(0!==this.props.numberOfCorrectAnswers){var t=!0;this.props.selectedAnswers.length===this.props.numberOfCorrectAnswers?this.props.selectedAnswers.forEach((function(n){var s=e.props.allAnswers.find((function(e){return n===e.key}));void 0===s||s.isAnswer||(t=!1)})):t=!1,this.setState({displayMessage:!0,pass:t})}}},{key:"displayMessage",value:function(){var e,t,n;return this.state.pass?(e="/success-baby.gif",t="You did it!",n="Done"):(e="/oh-hell-no.webp",t="Nope.",n="Try again"),a.a.createElement("div",{className:"modal is-active"},a.a.createElement("div",{className:"modal-background"}," "),a.a.createElement("div",{className:"modal-content"},a.a.createElement("p",{className:"image is-4by3"},a.a.createElement("img",{src:e,alt:t})),a.a.createElement("div",{style:{textAlign:"center",paddingTop:20}},a.a.createElement("button",{className:"button is-primary is-large",onClick:this.hideMessage}," ",n," "))),a.a.createElement("button",{className:"modal-close is-large",onClick:this.hideMessage,"aria-label":"close"}," "))}},{key:"displayQuestion",value:function(){var e=this.props.numberOfCorrectAnswers>0?"is-info":"is-disabled";return a.a.createElement(a.a.Fragment,null,this.state.displayMessage?this.displayMessage():"",a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("h1",{className:"title is-1 has-text-left"},"Kviz"),a.a.createElement("h2",{className:"title is-2 has-text-left"},this.props.question)),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement(g,{answers:this.props.allAnswers})),a.a.createElement("div",{className:"column"}," ")),a.a.createElement("div",{className:"columns submit-panel"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"},a.a.createElement("button",{className:"button is-link is-outlined is-large is-pulled-left",onClick:this.toggleEdit},a.a.createElement("span",{className:"icon is-large"},a.a.createElement("i",{className:"fas fa-2x fa-cogs"}))),a.a.createElement("button",{className:"button is-large is-pulled-right ".concat(e),onClick:this.evaluateAnswer},"Vyhodnot")),a.a.createElement("div",{className:"column"}," ")))}},{key:"fetchQuestionaire",value:function(){b()}},{key:"render",value:function(){var e=this;return a.a.createElement(D,{onUnlock:function(){return e.fetchQuestionaire()}},a.a.createElement("section",{className:"App section"},this.props.editMode?this.displayEditor():this.displayQuestion(),a.a.createElement("div",{className:"columns fixed-panel"},a.a.createElement("div",{className:"column"}," "),a.a.createElement("div",{className:"column is-two-thirds"}," "))))}}]),t}(a.a.Component);var q=m.b((function(e){return{editMode:e.editMode,allAnswers:e.allAnswers,selectedAnswers:e.selectedAnswers,question:e.question,numberOfCorrectAnswers:e.numberOfCorrectAnswers}}),(function(e){return{onEditStoreAnswers:function(t){e(h(t))},onAddAnswer:function(t){e(p(t))},onDeleteAnswer:function(t){e(w(t))},onEditQuestion:function(t){e(f(t))},toggleEdit:function(t){e(E(t))}}}))(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(8),R=n(21),W={allAnswers:[],selectedAnswers:[],question:"",editMode:!1,numberOfCorrectAnswers:0,unlockedQuestionaire:!1};var U=n(14),z=n(18),L=n.n(z),P=n(19),K=n(20),V={key:"root",storage:L.a},F=Object(U.a)(V,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;if(void 0===t)return e;switch(t.type){case"ADD_ANSWER":var n={allAnswers:[].concat(Object(R.a)(e.allAnswers),[t.answer]),numberOfCorrectAnswers:t.answer.isAnswer?e.numberOfCorrectAnswers+1:e.numberOfCorrectAnswers};return Object.assign({},e,n);case"EDIT_ANSWER":var s=e.allAnswers.findIndex((function(e){return e.id===t.answer.id}));e.allAnswers[s]=Object.assign({},e.allAnswers[s],t.answer);var a={allAnswers:e.allAnswers,numberOfCorrectAnswers:t.answer.isAnswer?e.numberOfCorrectAnswers+1:e.numberOfCorrectAnswers};return Object.assign({},e,a);case"REMOVE_ANSWER":var r={allAnswers:e.allAnswers.filter((function(e){return t.answer.key!==e.key})),selectedAnswers:e.selectedAnswers.filter((function(e){return t.answer.key!==e.key}))};return Object.assign({},e,r);case"SELECT_ANSWER":var c=[];return!1===t.select?c=e.selectedAnswers.filter((function(e){return e!==t.answer})):(c=Array.from(e.selectedAnswers)).push(t.answer),Object.assign({},e,{selectedAnswers:c});case"EDIT_QUESTION":var i=t.question;return Object.assign({},e,{question:i});case"ACTION_EDIT":return Object.assign({},e,{editMode:t.edit});case"UNLOCK_SITE":return Object.assign({},e,{unlockedQuestionaire:!0});case"FETCH_DATA":return Object.assign({},e);case"POST_DATA":default:return e}})),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,J=Object(I.e)(F,H(Object(I.a)(P.a))),B=Object(U.b)(J);Object(r.render)(a.a.createElement(m.a,{store:J},a.a.createElement(K.a,{loading:null,persistor:B},a.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.4e9a13c8.chunk.js.map